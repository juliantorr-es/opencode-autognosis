{
  "id": "fetch-wrapper.ts-api-9ee7b389",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-google-antigravity-auth/src/plugin/fetch-wrapper.ts",
  "chunk_type": "api",
  "content": "# API Surface: fetch-wrapper.ts\n\n## Public Functions\n\n### computeExponentialBackoffMs\n```typescript\nexport function computeExponentialBackoffMs(\n  attempt: number,\n  baseMs: number = RATE_LIMIT_BACKOFF_BASE_MS,\n  maxMs: number = RATE_LIMIT_BACKOFF_MAX_MS,\n): number\n```\nNo documentation found\n\n**Parameters:**\n- `attempt`: number - \n- `baseMs`: number - \n- `maxMs`: number - \n\n**Returns:** number\n\n\n### sleep\n```typescript\nexport function sleep(ms: number, signal?: AbortSignal | null): Promise<void>\n```\nNo documentation found\n\n**Parameters:**\n- `ms`: number - \n- `signal`: AbortSignal | null - \n\n**Returns:** Promise<void>\n\n\n### sleepWithBackoff\n```typescript\nexport async function sleepWithBackoff(totalMs: number, signal?: AbortSignal | null): Promise<void>\n```\nNo documentation found\n\n**Parameters:**\n- `totalMs`: number - \n- `signal`: AbortSignal | null - \n\n**Returns:** Promise<void>\n\n\n### overrideEndpointForRequest\n```typescript\nexport function overrideEndpointForRequest(request: RequestInfo | URL, endpoint: string): RequestInfo | URL\n```\nNo documentation found\n\n**Parameters:**\n- `request`: RequestInfo | URL - \n- `endpoint`: string - \n\n**Returns:** RequestInfo | URL\n\n\n### createAntigravityFetch\n```typescript\nexport function createAntigravityFetch(\n  getAuth: GetAuth,\n  client: PluginContext[\"client\"],\n): (input: RequestInfo | URL, init?: RequestInit) => Promise<Response>\n```\nNo documentation found\n\n**Parameters:**\n- `getAuth`: GetAuth - \n- `client`: PluginContext[\"client\"] - \n\n**Returns:** (input: RequestInfo | URL, init?: RequestInit) => Promise<Response>\n\n\n## Classes\n\n\n## Interfaces\n\n### RateLimitDelay\n```typescript\ninterface RateLimitDelay\n```\nNo documentation found\n\n\n### AttemptInfo\n```typescript\ninterface AttemptInfo\n```\nNo documentation found\n\n\n### EndpointLoopResult\n```typescript\ninterface EndpointLoopResult\n```\nNo documentation found\n\n\n## Types\n\n### RateLimitBodyInfo\n```typescript\ntype RateLimitBodyInfo\n```\nNo documentation found\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.208Z",
    "updated_at": "2026-01-30T05:26:52.208Z",
    "hash": "601101ed0bda0e0a63d9d64740a9909278495d236c9b530606a8812dda0431dc",
    "dependencies": [
      "./types",
      "../constants",
      "./auth",
      "./accounts",
      "./storage",
      "./token",
      "./project",
      "./request",
      "./request-helpers",
      "./debug",
      "./logger"
    ],
    "symbols": [
      "log",
      "RATE_LIMIT_BACKOFF_BASE_MS",
      "RATE_LIMIT_BACKOFF_MAX_MS",
      "RATE_LIMIT_SERVER_RETRY_MAX_MS",
      "RateLimitDelay",
      "computeExponentialBackoffMs",
      "safeAttempt",
      "multiplier",
      "toUrlStr",
      "extractModelFromUrl",
      "match",
      "getModelFamilyFromUrl",
      "model",
      "sleep",
      "timeout",
      "onAbort",
      "cleanup",
      "sleepWithBackoff",
      "stepsMs",
      "remainingMs",
      "stepIndex",
      "stepMs",
      "waitMs",
      "overrideEndpointForRequest",
      "replaceBase",
      "newUrl",
      "parseRetryAfterMs",
      "retryAfterMsHeader",
      "retryAfterSecondsHeader",
      "parsed",
      "parsed",
      "parseDurationLikeToMs",
      "trimmed",
      "matches",
      "totalMs",
      "match",
      "value",
      "unit",
      "parsed",
      "formatWaitTimeMs",
      "totalSeconds",
      "hours",
      "minutes",
      "seconds",
      "RateLimitBodyInfo",
      "extractRateLimitBodyInfo",
      "error",
      "message",
      "details",
      "detail",
      "type",
      "retryDelay",
      "retryDelayMs",
      "detail",
      "metadata",
      "quotaResetDelay",
      "quotaResetDelayMs",
      "afterMatch",
      "rawDuration",
      "parsed",
      "parseRateLimitInfoFromBodyText",
      "direct",
      "lines",
      "line",
      "jsonText",
      "parsed",
      "info",
      "extractRetryAfterFromBodyMs",
      "text",
      "AttemptInfo",
      "EndpointLoopResult",
      "handleRateLimit",
      "retryAfterHeaderMs",
      "bodyInfo",
      "retryAfterBodyMs",
      "serverRetryAfterMs",
      "retryAfterMs",
      "waitTimeSec",
      "retrySource",
      "error",
      "switchThresholdMs",
      "error",
      "handleServerError",
      "retryAfterMs",
      "error",
      "tryEndpointFallbacks",
      "lastError",
      "lastResponse",
      "lastAttemptInfo",
      "normalizedInput",
      "i",
      "currentEndpoint",
      "finalUrl",
      "originalUrl",
      "resolvedUrl",
      "debugContext",
      "response",
      "shouldRetryEndpoint",
      "error",
      "createAntigravityFetch",
      "rateLimitStateByAccount",
      "getRateLimitDelay",
      "now",
      "previous",
      "attempt",
      "backoffMs",
      "delayMs",
      "resetRateLimitState",
      "normalizedInput",
      "latestAuth",
      "urlString",
      "family",
      "storedAccounts",
      "accountManager",
      "accountCount",
      "resolveProjectContext",
      "abortSignal",
      "previousAccount",
      "account",
      "waitTimeMs",
      "waitTimeSec",
      "waitTimeHuman",
      "isSwitch",
      "wasRateLimited",
      "switchReason",
      "error",
      "authRecord",
      "refreshed",
      "parts",
      "error",
      "accessToken",
      "projectContext",
      "result",
      "waitMs",
      "saveError",
      "debugContext",
      "debugContext"
    ],
    "complexity_score": 100
  }
}