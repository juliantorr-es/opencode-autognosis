{
  "id": "oauth.ts-summary-bdcd2a71",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/antigravity/oauth.ts",
  "chunk_type": "summary",
  "content": "# Summary: oauth.ts\n\n## File Type\n.ts - TypeScript source file\n\n## Purpose\nDocumented purpose found in JSDoc\n\n## Key Components\n\n### Functions (6)\n- **encodeState**: Encode an object into a URL-safe base64 string.\n- **decodeState**: Decode an OAuth state parameter back into its structured representation.\n- **authorizeAntigravity**: Build the Antigravity OAuth authorization URL including PKCE and optional project metadata.\n- **fetchWithTimeout**: No documentation found\n- **fetchProjectID**: No documentation found\n- **exchangeAntigravity**: Exchange an authorization code for Antigravity CLI access and refresh tokens.\n\n\n\n\n## Dependencies\n- @openauthjs/openauth/pkce\n- ../constants\n- ../plugin/logger\n- ../plugin/auth\n\n## Exports\n- AntigravityAuthorization\n- AntigravityTokenExchangeResult\n- authorizeAntigravity\n- exchangeAntigravity\n\n## Complexity Metrics\n- Lines of code: 271\n- Estimated complexity: 100/100\n\n## Notes\nNo specific notes found",
  "metadata": {
    "created_at": "2026-01-30T05:26:51.876Z",
    "updated_at": "2026-01-30T05:26:51.876Z",
    "hash": "e0a9aed9e7c9822c8ff96e8b3335fb881f2c510f1bc2058b8ff54273de5535e5",
    "dependencies": [
      "@openauthjs/openauth/pkce",
      "../constants",
      "../plugin/logger",
      "../plugin/auth"
    ],
    "symbols": [
      "log",
      "PkcePair",
      "AntigravityAuthState",
      "AntigravityAuthorization",
      "AntigravityTokenExchangeSuccess",
      "AntigravityTokenExchangeFailure",
      "AntigravityTokenExchangeResult",
      "AntigravityTokenResponse",
      "AntigravityUserInfo",
      "encodeState",
      "decodeState",
      "normalized",
      "padded",
      "json",
      "parsed",
      "authorizeAntigravity",
      "pkce",
      "url",
      "FETCH_TIMEOUT_MS",
      "fetchWithTimeout",
      "controller",
      "timeout",
      "fetchProjectID",
      "errors",
      "loadHeaders",
      "loadEndpoints",
      "baseEndpoint",
      "url",
      "response",
      "message",
      "data",
      "e",
      "exchangeAntigravity",
      "startTime",
      "tokenResponse",
      "errorText",
      "tokenPayload",
      "userInfoResponse",
      "userInfo",
      "refreshToken",
      "effectiveProjectId",
      "storedRefresh",
      "error"
    ],
    "complexity_score": 100
  }
}