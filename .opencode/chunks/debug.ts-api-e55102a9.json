{
  "id": "debug.ts-api-e55102a9",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/plugin/debug.ts",
  "chunk_type": "api",
  "content": "# API Surface: debug.ts\n\n## Public Functions\n\n### initializeDebug\n```typescript\nexport function initializeDebug(config: AntigravityConfig): void\n```\nInitialize or reinitialize debug state with the given config.\nCall this once at plugin startup after loading config.\n\n**Parameters:**\n- `config`: AntigravityConfig - \n\n**Returns:** void\n\n\n### isDebugEnabled\n```typescript\nexport function isDebugEnabled(): boolean\n```\nNo documentation found\n\n**Returns:** boolean\n\n\n### isVerboseEnabled\n```typescript\nexport function isVerboseEnabled(): boolean\n```\nNo documentation found\n\n**Returns:** boolean\n\n\n### getLogFilePath\n```typescript\nexport function getLogFilePath(): string | undefined\n```\nNo documentation found\n\n**Returns:** string | undefined\n\n\n### startAntigravityDebugRequest\n```typescript\nexport function startAntigravityDebugRequest(meta: AntigravityDebugRequestMeta): AntigravityDebugContext | null\n```\nBegins a debug trace for an Antigravity request.\n\n**Parameters:**\n- `meta`: AntigravityDebugRequestMeta - \n\n**Returns:** AntigravityDebugContext | null\n\n\n### logAntigravityDebugResponse\n```typescript\nexport function logAntigravityDebugResponse(\n  context: AntigravityDebugContext | null | undefined,\n  response: Response,\n  meta: AntigravityDebugResponseMeta =\n```\nLogs response details for a previously started debug trace.\n\n**Parameters:**\n- `context`: AntigravityDebugContext | null | undefined - \n- `response`: Response - \n- `meta`: AntigravityDebugResponseMeta - \n\n**Returns:** void\n\n\n### logAccountContext\n```typescript\nexport function logAccountContext(label: string, info: AccountDebugInfo): void\n```\nNo documentation found\n\n**Parameters:**\n- `label`: string - \n- `info`: AccountDebugInfo - \n\n**Returns:** void\n\n\n### logRateLimitEvent\n```typescript\nexport function logRateLimitEvent(\n  accountIndex: number,\n  email: string | undefined,\n  family: string,\n  status: number,\n  retryAfterMs: number,\n  bodyInfo:\n```\nNo documentation found\n\n**Parameters:**\n- `accountIndex`: number - \n- `email`: string | undefined - \n- `family`: string - \n- `status`: number - \n- `retryAfterMs`: number - \n- `bodyInfo`: { message?: string; quotaResetTime?: string; retryDelayMs?: number | null; reason?: string } - \n\n**Returns:** void\n\n\n### logRateLimitSnapshot\n```typescript\nexport function logRateLimitSnapshot(\n  family: string,\n  accounts: Array<\n```\nNo documentation found\n\n**Parameters:**\n- `family`: string - \n- `accounts`: Array<{ index: number; email?: string; rateLimitResetTimes?: { claude?: number; gemini?: number } }> - \n\n**Returns:** void\n\n\n### logResponseBody\n```typescript\nexport async function logResponseBody(\n  context: AntigravityDebugContext | null | undefined,\n  response: Response,\n  status: number,\n): Promise<string | undefined>\n```\nNo documentation found\n\n**Parameters:**\n- `context`: AntigravityDebugContext | null | undefined - \n- `response`: Response - \n- `status`: number - \n\n**Returns:** Promise<string | undefined>\n\n\n### logModelFamily\n```typescript\nexport function logModelFamily(url: string, extractedModel: string | null, family: string): void\n```\nNo documentation found\n\n**Parameters:**\n- `url`: string - \n- `extractedModel`: string | null - \n- `family`: string - \n\n**Returns:** void\n\n\n### debugLogToFile\n```typescript\nexport function debugLogToFile(message: string): void\n```\nNo documentation found\n\n**Parameters:**\n- `message`: string - \n\n**Returns:** void\n\n\n## Classes\n\n\n## Interfaces\n\n### DebugState\n```typescript\ninterface DebugState\n```\nNo documentation found\n\n\n### AntigravityDebugContext\n```typescript\nexport interface AntigravityDebugContext\n```\nNo documentation found\n\n\n### AntigravityDebugRequestMeta\n```typescript\ninterface AntigravityDebugRequestMeta\n```\nNo documentation found\n\n\n### AntigravityDebugResponseMeta\n```typescript\ninterface AntigravityDebugResponseMeta\n```\nNo documentation found\n\n\n### AccountDebugInfo\n```typescript\nexport interface AccountDebugInfo\n```\nNo documentation found\n\n\n## Types\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:51.951Z",
    "updated_at": "2026-01-30T05:26:51.951Z",
    "hash": "c35e8568147b0ff5dfc3488b80fbdcf3607d9cb38f551d6fcc1647ed26251d27",
    "dependencies": [
      "node:fs",
      "node:path",
      "node:os",
      "node:process",
      "./config",
      "./storage"
    ],
    "symbols": [
      "MAX_BODY_PREVIEW_CHARS",
      "MAX_BODY_VERBOSE_CHARS",
      "DEBUG_MESSAGE_PREFIX",
      "DebugState",
      "debugState",
      "parseDebugLevel",
      "trimmed",
      "getConfigDir",
      "platform",
      "xdgConfig",
      "getLogsDir",
      "logsDir",
      "createLogFilePath",
      "timestamp",
      "createLogWriter",
      "stream",
      "timestamp",
      "formatted",
      "initializeDebug",
      "envDebugFlag",
      "debugLevel",
      "debugEnabled",
      "verboseEnabled",
      "logFilePath",
      "logWriter",
      "getDebugState",
      "envDebugFlag",
      "debugLevel",
      "debugEnabled",
      "verboseEnabled",
      "logFilePath",
      "logWriter",
      "isDebugEnabled",
      "isVerboseEnabled",
      "getLogFilePath",
      "AntigravityDebugContext",
      "AntigravityDebugRequestMeta",
      "AntigravityDebugResponseMeta",
      "requestCounter",
      "startAntigravityDebugRequest",
      "state",
      "id",
      "method",
      "bodyPreview",
      "logAntigravityDebugResponse",
      "state",
      "durationMs",
      "maskHeaders",
      "result",
      "parsed",
      "formatBodyPreview",
      "truncateForLog",
      "logDebug",
      "formatError",
      "AccountDebugInfo",
      "logAccountContext",
      "accountLabel",
      "indexLabel",
      "rateLimitInfo",
      "logRateLimitEvent",
      "accountLabel",
      "logRateLimitSnapshot",
      "now",
      "entries",
      "label",
      "reset",
      "remaining",
      "seconds",
      "logResponseBody",
      "state",
      "isError",
      "shouldLogBody",
      "text",
      "maxChars",
      "preview",
      "e",
      "logModelFamily",
      "debugLogToFile"
    ],
    "complexity_score": 100
  }
}