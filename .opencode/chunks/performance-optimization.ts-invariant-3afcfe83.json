{
  "id": "performance-optimization.ts-invariant-3afcfe83",
  "file_path": "/Users/user/opencode-autognosis/src/performance-optimization.ts",
  "chunk_type": "invariant",
  "content": "# Invariants: performance-optimization.ts\n\n## Core Invariants\n\n\n## Constraints\n- **PROJECT_ROOT**: process.cwd()\n- **OPENCODE_DIR**: path.join(PROJECT_ROOT, \".opencode\")\n- **CACHE_DIR**: path.join(OPENCODE_DIR, \"cache\")\n- **PERF_DIR**: path.join(OPENCODE_DIR, \"performance\")\n- **METRICS_DIR**: path.join(OPENCODE_DIR, \"metrics\")\n\n## Assumptions\n\n\n## State Management\nNo explicit state management patterns detected\n\n## Error Handling\nError handling metrics: 22 try-catch blocks, 0 throw statements\n\n## Performance Considerations\nPerformance patterns: Contains explicit loops\n\n## Security Considerations\nNo obvious security risks detected via static analysis",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.434Z",
    "updated_at": "2026-01-30T05:26:52.434Z",
    "hash": "904d0653c97db04eef33ab059f2a8e83f1722b2fc876af6b827ee3c79fd931c0",
    "dependencies": [
      "@opencode-ai/plugin",
      "node:child_process",
      "node:fs/promises",
      "node:fs",
      "node:path",
      "node:util",
      "node:crypto",
      "./chunk-cards.js"
    ],
    "symbols": [
      "execAsync",
      "PROJECT_ROOT",
      "OPENCODE_DIR",
      "CACHE_DIR",
      "PERF_DIR",
      "METRICS_DIR",
      "log",
      "CacheEntry",
      "PerformanceMetrics",
      "IndexingState",
      "BackgroundTask",
      "runCmd",
      "error",
      "ensurePerfDirs",
      "generateCacheKey",
      "paramHash",
      "getCacheEntry",
      "cachePath",
      "entry",
      "age",
      "error",
      "setCacheEntry",
      "entry",
      "cachePath",
      "error",
      "recordMetrics",
      "metricsPath",
      "error",
      "measureMemoryUsage",
      "performanceTools",
      "startTime",
      "metrics",
      "statePath",
      "indexingState",
      "taskId",
      "taskPath",
      "backgroundTask",
      "changedFiles",
      "allFiles",
      "filesToIndex",
      "filesProcessed",
      "filesIndexed",
      "file",
      "filePath",
      "stats",
      "lastModified",
      "error",
      "error",
      "cacheKey",
      "entry",
      "error",
      "cacheKey",
      "error",
      "files",
      "now",
      "maxAge",
      "totalSize",
      "expiredCount",
      "oversizedCount",
      "deletedFiles",
      "file",
      "filePath",
      "stats",
      "age",
      "entry",
      "shouldDelete",
      "error",
      "error",
      "files",
      "cutoffTime",
      "metrics",
      "file",
      "filePath",
      "stats",
      "metric",
      "error",
      "limitedMetrics",
      "summary",
      "error",
      "files",
      "tasks",
      "file",
      "taskPath",
      "task",
      "error",
      "error",
      "currentMemory",
      "memoryReductionNeeded",
      "cacheFiles",
      "cacheEntries",
      "file",
      "filePath",
      "entry",
      "error",
      "scoreA",
      "scoreB",
      "removedSize",
      "removedCount",
      "targetRemovalSize",
      "i",
      "entry",
      "finalMemory",
      "error",
      "getAllSourceFiles",
      "extensions",
      "sourceFiles",
      "scanDirectory",
      "entries",
      "entry",
      "fullPath",
      "error",
      "indexFile",
      "content",
      "ast",
      "chunkTypes",
      "fileHash",
      "chunkType",
      "cardId",
      "cardPath",
      "chunkContent",
      "chunkCard",
      "error",
      "runBackgroundIndexing",
      "taskPath",
      "task",
      "force_full",
      "filesToIndex",
      "changedFiles",
      "allFiles",
      "f",
      "fp",
      "stats",
      "e",
      "total",
      "processed",
      "file",
      "filePath",
      "error",
      "taskPath",
      "task",
      "writeError",
      "calculateMetricsSummary",
      "successCount",
      "totalDuration",
      "totalMemory"
    ],
    "complexity_score": 100
  }
}