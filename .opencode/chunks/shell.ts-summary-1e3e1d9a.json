{
  "id": "shell.ts-summary-1e3e1d9a",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-worktree/src/plugin/kdco-primitives/shell.ts",
  "chunk_type": "summary",
  "content": "# Summary: shell.ts\n\n## File Type\n.ts - TypeScript source file\n\n## Purpose\nPurpose not explicitly documented\n\n## Key Components\n\n### Functions (4)\n- **assertShellSafe**: Assert that a string is safe for shell escaping.\n\nNull bytes cannot be escaped in any shell and must be rejected outright.\nThis is the first line of defense before any escaping is attempted.\n- **escapeBash**: Escape a string for safe use in bash double-quoted strings.\n\nHandles all shell metacharacters including:\n- Backslash (\\), double quote (\"), dollar ($), backtick (`)\n- Exclamation mark (!) for history expansion\n- Newlines and carriage returns (replaced with spaces)\n- **escapeAppleScript**: Escape a string for safe use in AppleScript double-quoted strings.\n\nAppleScript uses different escaping rules than POSIX shells.\nOnly backslash and double quote need escaping.\nNewlines are replaced with spaces (AppleScript doesn't support \\n escapes).\n- **escapeBatch**: Escape a string for safe use in Windows batch files.\n\nHandles batch metacharacters:\n- Percent (%), caret (^), ampersand (&)\n- Less than (<), greater than (>), pipe (|)\n\n\n\n\n## Dependencies\nNo external dependencies\n\n## Exports\n- assertShellSafe\n- escapeBash\n- escapeAppleScript\n- escapeBatch\n\n## Complexity Metrics\n- Lines of code: 139\n- Estimated complexity: 100/100\n\n## Notes\nNo specific notes found",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.380Z",
    "updated_at": "2026-01-30T05:26:52.380Z",
    "hash": "ebe03b77f34319b6caf0089769ff07ce4bbd53d2aa76c9e46bf0334ba8f78376",
    "dependencies": [],
    "symbols": [
      "SHELL_FORBIDDEN_CHARS",
      "assertShellSafe",
      "escapeBash",
      "escapeAppleScript",
      "escapeBatch"
    ],
    "complexity_score": 100
  }
}