{
  "id": "terminal.ts-invariant-9443adb6",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-worktree/src/plugin/worktree/terminal.ts",
  "chunk_type": "invariant",
  "content": "# Invariants: terminal.ts\n\n## Core Invariants\n\n\n## Constraints\n- **STABILIZATION_DELAY_MS**: 150\n\n//\n\n## Assumptions\n\n\n## State Management\nNo explicit state management patterns detected\n\n## Error Handling\nError handling metrics: 18 try-catch blocks, 0 throw statements\n\n## Performance Considerations\nNo obvious performance optimization patterns detected\n\n## Security Considerations\nNo obvious security risks detected via static analysis",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.393Z",
    "updated_at": "2026-01-30T05:26:52.393Z",
    "hash": "151576b633fe87d29356b826ef2e0bdafe4a3c88608ca4f962d2c80327824d6e",
    "dependencies": [
      "node:fs/promises",
      "node:os",
      "node:path",
      "zod",
      "../kdco-primitives",
      "../kdco-primitives"
    ],
    "symbols": [
      "withTempScript",
      "scriptPath",
      "cleanupError",
      "wrapWithSelfCleanup",
      "wrapBatchWithSelfCleanup",
      "TerminalType",
      "TerminalResult",
      "tmuxMutex",
      "STABILIZATION_DELAY_MS",
      "wslEnvSchema",
      "linuxTerminalEnvSchema",
      "macTerminalEnvSchema",
      "LinuxTerminal",
      "MacTerminal",
      "isInsideWSL",
      "parsed",
      "detectTerminalType",
      "openTmuxWindow",
      "tmuxArgs",
      "scriptPath",
      "escapedCwd",
      "escapedCommand",
      "scriptContent",
      "createResult",
      "error",
      "detectCurrentMacTerminal",
      "env",
      "termProgram",
      "openMacOSTerminal",
      "escapedCwd",
      "escapedCommand",
      "scriptContent",
      "terminal",
      "detachedScriptPath",
      "proc",
      "error",
      "remoteResult",
      "result",
      "kittyProc",
      "alacrittyProc",
      "warpProc",
      "escapedPath",
      "appleScript",
      "result",
      "proc",
      "exitCode",
      "stderr",
      "error",
      "detectCurrentLinuxTerminal",
      "env",
      "termProgram",
      "openLinuxTerminal",
      "escapedCwd",
      "escapedCommand",
      "scriptContent",
      "scriptPath",
      "tryTerminal",
      "check",
      "proc",
      "currentTerminal",
      "result",
      "kittyRemote",
      "xdgResult",
      "xteResult",
      "modernTerminals",
      "result",
      "deTerminals",
      "result",
      "xtermResult",
      "error",
      "openWindowsTerminal",
      "escapedCwd",
      "escapedCommand",
      "scriptContent",
      "scriptPath",
      "wtCheck",
      "proc",
      "proc",
      "error",
      "error",
      "openWSLTerminal",
      "escapedCwd",
      "escapedCommand",
      "scriptContent",
      "scriptPath",
      "wtResult",
      "proc",
      "proc",
      "error",
      "error",
      "openTerminal",
      "terminalType"
    ],
    "complexity_score": 100
  }
}