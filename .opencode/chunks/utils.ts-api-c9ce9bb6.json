{
  "id": "utils.ts-api-c9ce9bb6",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-dynamic-context-pruning/lib/strategies/utils.ts",
  "chunk_type": "api",
  "content": "# API Surface: utils.ts\n\n## Public Functions\n\n### getCurrentParams\n```typescript\nexport function getCurrentParams(\n    state: SessionState,\n    messages: WithParts[],\n    logger: Logger,\n):\n```\nNo documentation found\n\n**Parameters:**\n- `state`: SessionState - \n- `messages`: WithParts[] - \n- `logger`: Logger - \n\n**Returns:** {\n    providerId: string | undefined\n    modelId: string | undefined\n    agent: string | undefined\n    variant: string | undefined\n}\n\n\n### countTokens\n```typescript\nexport function countTokens(text: string): number\n```\nNo documentation found\n\n**Parameters:**\n- `text`: string - \n\n**Returns:** number\n\n\n## Classes\n\n\n## Interfaces\n\n\n## Types\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.182Z",
    "updated_at": "2026-01-30T05:26:52.182Z",
    "hash": "c4293004139d319c0c96991681856a0f3c489d7a00645a5fa6bc8c65ca069a8c",
    "dependencies": [
      "../state",
      "@opencode-ai/sdk/v2",
      "../logger",
      "@anthropic-ai/tokenizer",
      "../shared-utils"
    ],
    "symbols": [
      "getCurrentParams",
      "userMsg",
      "userInfo",
      "agent",
      "providerId",
      "modelId",
      "variant",
      "countTokens",
      "estimateTokensBatch",
      "calculateTokensSaved",
      "contents",
      "msg",
      "parts",
      "part",
      "questions",
      "content",
      "content",
      "content",
      "tokenCounts",
      "error"
    ],
    "complexity_score": 100
  }
}