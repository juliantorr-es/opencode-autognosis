{
  "id": "chunk-cards.ts-invariant-b0a660bc",
  "file_path": "/Users/user/opencode-autognosis/src/chunk-cards.ts",
  "chunk_type": "invariant",
  "content": "# Invariants: chunk-cards.ts\n\n## Core Invariants\n\n\n## Constraints\n- **PROJECT_ROOT**: process.cwd()\n- **OPENCODE_DIR**: path.join(PROJECT_ROOT, \".opencode\")\n- **CHUNK_DIR**: path.join(OPENCODE_DIR, \"chunks\")\n- **CACHE_DIR**: path.join(OPENCODE_DIR, \"cache\")\n\n## Assumptions\n\n\n## State Management\nDetected patterns: React useState hook, React useReducer hook, Class component state, Redux/Flux pattern, MobX pattern\n\n## Error Handling\nError handling metrics: 5 try-catch blocks, 0 throw statements\n\n## Performance Considerations\nPerformance patterns: Uses React.useMemo, Uses React.useCallback\n\n## Security Considerations\nSecurity alerts: Potential XSS risk (innerHTML usage), Critical security risk (eval usage), Explicit React XSS risk",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.416Z",
    "updated_at": "2026-01-30T05:26:52.416Z",
    "hash": "8e90bd8fe2615601bfa3e9c3ed61c42d81d2287f923d5c72ac1849bbfc0784eb",
    "dependencies": [
      "@opencode-ai/plugin",
      "node:child_process",
      "node:fs/promises",
      "node:fs",
      "node:path",
      "node:util",
      "node:crypto",
      "typescript"
    ],
    "symbols": [
      "execAsync",
      "PROJECT_ROOT",
      "OPENCODE_DIR",
      "CHUNK_DIR",
      "CACHE_DIR",
      "log",
      "ChunkCard",
      "ModuleSummary",
      "ActiveSet",
      "runCmd",
      "error",
      "ensureChunkDir",
      "calculateHash",
      "calculateComplexity",
      "lines",
      "cyclomaticComplexity",
      "nestingDepth",
      "extractSymbols",
      "symbols",
      "ext",
      "funcs",
      "classes",
      "funcs",
      "classes",
      "functionMatches",
      "classMatches",
      "typeMatches",
      "chunkCardsTools",
      "fileHash",
      "cardId",
      "cardPath",
      "existingCard",
      "sourceContent",
      "ast",
      "chunkContent",
      "chunkCard",
      "error",
      "cardPath",
      "card",
      "files",
      "matchingCards",
      "file",
      "cardPath",
      "card",
      "error",
      "files",
      "cards",
      "file",
      "cardPath",
      "card",
      "paginatedCards",
      "error",
      "cardPath",
      "error",
      "generateSummaryChunk",
      "lines",
      "fileName",
      "fileExtension",
      "functions",
      "classes",
      "imports",
      "exports",
      "summary",
      "generateApiChunk",
      "functions",
      "classes",
      "interfaces",
      "types",
      "fileExtension",
      "api",
      "generateInvariantChunk",
      "invariants",
      "constraints",
      "assumptions",
      "invariant",
      "extractFunctions",
      "functions",
      "functionRegex",
      "match",
      "extractClasses",
      "classes",
      "classRegex",
      "match",
      "extractImports",
      "imports",
      "importRegex",
      "match",
      "extractExports",
      "exports",
      "exportRegex",
      "match",
      "extractInterfaces",
      "interfaces",
      "interfaceRegex",
      "match",
      "extractTypes",
      "types",
      "typeRegex",
      "match",
      "FunctionInfo",
      "ClassInfo",
      "InterfaceInfo",
      "TypeInfo",
      "extractPurpose",
      "purposeMatch",
      "extractNotes",
      "parseParameters",
      "extractFunctionDescription",
      "jsdocMatch",
      "extractClassDescription",
      "jsdocMatch",
      "extractMethods",
      "extractProperties",
      "extractInterfaceDescription",
      "extractTypeDescription",
      "extractInvariants",
      "invariants",
      "throwMatches",
      "assertMatches",
      "extractConstraints",
      "constraints",
      "constMatches",
      "parts",
      "extractAssumptions",
      "assumptions",
      "commentMatches",
      "extractStateManagement",
      "patterns",
      "extractErrorHandling",
      "tryCount",
      "catchCount",
      "throwCount",
      "extractPerformanceConsiderations",
      "patterns",
      "extractSecurityConsiderations",
      "risks",
      "getFileTypeDescription",
      "descriptions",
      "extractDependencies",
      "ext",
      "parseFileAST",
      "extractFunctionsFromAST",
      "functions",
      "visit",
      "extractClassesFromAST",
      "classes",
      "visit",
      "methods",
      "properties",
      "extractInterfacesFromAST",
      "interfaces",
      "visit",
      "extractTypesFromAST",
      "types",
      "visit",
      "extractImportsFromAST",
      "imports",
      "visit",
      "moduleSpecifier",
      "extractExportsFromAST",
      "exports",
      "visit",
      "extractSymbolsFromAST",
      "symbols",
      "visit",
      "isNodeExported",
      "getJSDocDescription",
      "jsDocTags",
      "extractFunctionsCpp",
      "functions",
      "regex",
      "match",
      "returnType",
      "parts",
      "name",
      "extractClassesCpp",
      "classes",
      "regex",
      "match",
      "extractImportsCpp",
      "imports",
      "regex",
      "match",
      "extractFunctionsSwift",
      "functions",
      "regex",
      "match",
      "parts",
      "extractClassesSwift",
      "classes",
      "regex",
      "match",
      "extractImportsSwift",
      "imports",
      "regex",
      "match"
    ],
    "complexity_score": 100
  }
}