{
  "id": "claude.ts-api-e17db409",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/plugin/transform/claude.ts",
  "chunk_type": "api",
  "content": "# API Surface: claude.ts\n\n## Public Functions\n\n### isClaudeModel\n```typescript\nexport function isClaudeModel(model: string): boolean\n```\nCheck if a model is a Claude model.\n\n**Parameters:**\n- `model`: string - \n\n**Returns:** boolean\n\n\n### isClaudeThinkingModel\n```typescript\nexport function isClaudeThinkingModel(model: string): boolean\n```\nCheck if a model is a Claude thinking model.\n\n**Parameters:**\n- `model`: string - \n\n**Returns:** boolean\n\n\n### configureClaudeToolConfig\n```typescript\nexport function configureClaudeToolConfig(payload: RequestPayload): void\n```\nConfigure Claude tool calling to use VALIDATED mode.\nThis ensures proper tool call validation on the backend.\n\n**Parameters:**\n- `payload`: RequestPayload - \n\n**Returns:** void\n\n\n### buildClaudeThinkingConfig\n```typescript\nexport function buildClaudeThinkingConfig(\n  includeThoughts: boolean,\n  thinkingBudget?: number,\n): ThinkingConfig\n```\nBuild Claude thinking config with snake_case keys.\n\n**Parameters:**\n- `includeThoughts`: boolean - \n- `thinkingBudget`: number - \n\n**Returns:** ThinkingConfig\n\n\n### ensureClaudeMaxOutputTokens\n```typescript\nexport function ensureClaudeMaxOutputTokens(\n  generationConfig: Record<string, unknown>,\n  thinkingBudget: number,\n): void\n```\nEnsure maxOutputTokens is sufficient for Claude thinking models.\nIf thinking budget is set, max output must be larger than the budget.\n\n**Parameters:**\n- `generationConfig`: Record<string, unknown> - \n- `thinkingBudget`: number - \n\n**Returns:** void\n\n\n### appendClaudeThinkingHint\n```typescript\nexport function appendClaudeThinkingHint(\n  payload: RequestPayload,\n  hint: string = CLAUDE_INTERLEAVED_THINKING_HINT,\n): void\n```\nAppend interleaved thinking hint to system instruction.\nHandles various system instruction formats (string, object with parts array).\n\n**Parameters:**\n- `payload`: RequestPayload - \n- `hint`: string - \n\n**Returns:** void\n\n\n### normalizeClaudeTools\n```typescript\nexport function normalizeClaudeTools(\n  payload: RequestPayload,\n  cleanJSONSchema: (schema: unknown) => Record<string, unknown>,\n):\n```\nNormalize tools for Claude models.\nConverts various tool formats to functionDeclarations format.\n\n**Parameters:**\n- `payload`: RequestPayload - \n- `cleanJSONSchema`: (schema: unknown) => Record<string, unknown> - \n\n**Returns:** { toolDebugMissing: number; toolDebugSummaries: string[] }\n\n\n### convertStopSequences\n```typescript\nexport function convertStopSequences(\n  generationConfig: Record<string, unknown>,\n): void\n```\nConvert snake_case stop_sequences to camelCase stopSequences.\n\n**Parameters:**\n- `generationConfig`: Record<string, unknown> - \n\n**Returns:** void\n\n\n### applyClaudeTransforms\n```typescript\nexport function applyClaudeTransforms(\n  payload: RequestPayload,\n  options: ClaudeTransformOptions,\n): ClaudeTransformResult\n```\nApply all Claude-specific transformations.\n\n**Parameters:**\n- `payload`: RequestPayload - \n- `options`: ClaudeTransformOptions - \n\n**Returns:** ClaudeTransformResult\n\n\n## Classes\n\n\n## Interfaces\n\n### ClaudeTransformOptions\n```typescript\nexport interface ClaudeTransformOptions\n```\nApply all Claude-specific transformations to a request payload.\n\n\n### ClaudeTransformResult\n```typescript\nexport interface ClaudeTransformResult\n```\nNo documentation found\n\n\n## Types\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.080Z",
    "updated_at": "2026-01-30T05:26:52.080Z",
    "hash": "a5727a308041fb847d023889ee4f39a8977f9d0fe644e67daa2a2927932f37de",
    "dependencies": [
      "./types",
      "../../constants"
    ],
    "symbols": [
      "CLAUDE_THINKING_MAX_OUTPUT_TOKENS",
      "CLAUDE_INTERLEAVED_THINKING_HINT",
      "isClaudeModel",
      "isClaudeThinkingModel",
      "lower",
      "configureClaudeToolConfig",
      "toolConfig",
      "buildClaudeThinkingConfig",
      "ensureClaudeMaxOutputTokens",
      "currentMax",
      "appendClaudeThinkingHint",
      "existing",
      "sys",
      "partsValue",
      "parts",
      "appended",
      "i",
      "part",
      "partRecord",
      "text",
      "normalizeClaudeTools",
      "toolDebugMissing",
      "toolDebugSummaries",
      "functionDeclarations",
      "passthroughTools",
      "normalizeSchema",
      "createPlaceholderSchema",
      "cleaned",
      "hasProperties",
      "t",
      "pushDeclaration",
      "schema",
      "name",
      "description",
      "finalTools",
      "convertStopSequences",
      "ClaudeTransformOptions",
      "ClaudeTransformResult",
      "applyClaudeTransforms",
      "isThinking",
      "thinkingBudget",
      "thinkingConfig",
      "generationConfig"
    ],
    "complexity_score": 100
  }
}