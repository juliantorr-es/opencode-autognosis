{
  "id": "worktree.ts-api-c22e092a",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-worktree/src/plugin/worktree.ts",
  "chunk_type": "api",
  "content": "# API Surface: worktree.ts\n\n## Public Functions\n\n\n## Classes\n\n### WorktreeError\n```typescript\nclass WorktreeError extends Error\n```\nNo documentation found\n\n\n\n\n## Interfaces\n\n### Logger\n```typescript\ninterface Logger\n```\nLogger interface for structured logging\n\n\n### OkResult\n```typescript\ninterface OkResult<T>\n```\nResult type for fallible operations\n\n\n### ErrResult\n```typescript\ninterface ErrResult<E>\n```\nNo documentation found\n\n\n### ForkResult\n```typescript\ninterface ForkResult\n```\nNo documentation found\n\n\n## Types\n\n### Result\n```typescript\ntype Result<T, E>\n```\nNo documentation found\n\n\n### WorktreeConfig\n```typescript\ntype WorktreeConfig\n```\nNo documentation found\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.400Z",
    "updated_at": "2026-01-30T05:26:52.400Z",
    "hash": "b4d4b03508bf3e764713c9dc900fbf09ee5ff0fb03d4d8f18ddd043760e19ca7",
    "dependencies": [
      "bun:sqlite",
      "node:fs/promises",
      "node:os",
      "node:path",
      "@opencode-ai/plugin",
      "@opencode-ai/sdk",
      "./kdco-primitives/types",
      "jsonc-parser",
      "zod",
      "./kdco-primitives/get-project-id",
      "./worktree/state",
      "./worktree/terminal"
    ],
    "symbols": [
      "Logger",
      "DB_MAX_RETRIES",
      "DB_RETRY_DELAY_MS",
      "MAX_SESSION_CHAIN_DEPTH",
      "OkResult",
      "ErrResult",
      "Result",
      "Result",
      "isValidBranchName",
      "i",
      "code",
      "branchNameSchema",
      "worktreeConfigSchema",
      "WorktreeConfig",
      "WorktreeError",
      "pathExists",
      "e",
      "copyIfExists",
      "copyDirIfExists",
      "ForkResult",
      "forkWithContext",
      "rootSessionId",
      "e",
      "forkedSessionResponse",
      "forkedSession",
      "planCopied",
      "delegationsCopied",
      "workspaceBase",
      "delegationsBase",
      "destWorkspaceDir",
      "destDelegationsDir",
      "srcPlan",
      "destPlan",
      "srcDelegations",
      "error",
      "workspaceBase",
      "delegationsBase",
      "destWorkspaceDir",
      "destDelegationsDir",
      "db",
      "projectRoot",
      "cleanupRegistered",
      "registerCleanupHandlers",
      "cleanup",
      "getDb",
      "lastError",
      "attempt",
      "error",
      "initDb",
      "git",
      "proc",
      "error",
      "branchExists",
      "result",
      "createWorktree",
      "worktreePath",
      "exists",
      "result",
      "base",
      "result",
      "removeWorktree",
      "result",
      "isPathSafe",
      "resolved",
      "copyFiles",
      "file",
      "sourcePath",
      "targetPath",
      "sourceFile",
      "targetFileDir",
      "error",
      "isNotFound",
      "symlinkDirs",
      "dir",
      "sourcePath",
      "targetPath",
      "fileStat",
      "targetParentDir",
      "error",
      "runHooks",
      "command",
      "result",
      "stderr",
      "error",
      "loadWorktreeConfig",
      "configPath",
      "file",
      "defaultConfig",
      "content",
      "parsed",
      "error",
      "WorktreePlugin",
      "log",
      "database",
      "branchResult",
      "baseResult",
      "result",
      "worktreePath",
      "worktreeConfig",
      "mainWorktreePath",
      "projectId",
      "currentId",
      "depth",
      "session",
      "terminalResult",
      "session",
      "pendingDelete",
      "config",
      "addResult",
      "commitResult",
      "removeResult"
    ],
    "complexity_score": 100
  }
}