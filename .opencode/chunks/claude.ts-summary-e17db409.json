{
  "id": "claude.ts-summary-e17db409",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/plugin/transform/claude.ts",
  "chunk_type": "summary",
  "content": "# Summary: claude.ts\n\n## File Type\n.ts - TypeScript source file\n\n## Purpose\nPurpose not explicitly documented\n\n## Key Components\n\n### Functions (9)\n- **isClaudeModel**: Check if a model is a Claude model.\n- **isClaudeThinkingModel**: Check if a model is a Claude thinking model.\n- **configureClaudeToolConfig**: Configure Claude tool calling to use VALIDATED mode.\nThis ensures proper tool call validation on the backend.\n- **buildClaudeThinkingConfig**: Build Claude thinking config with snake_case keys.\n- **ensureClaudeMaxOutputTokens**: Ensure maxOutputTokens is sufficient for Claude thinking models.\nIf thinking budget is set, max output must be larger than the budget.\n- **appendClaudeThinkingHint**: Append interleaved thinking hint to system instruction.\nHandles various system instruction formats (string, object with parts array).\n- **normalizeClaudeTools**: Normalize tools for Claude models.\nConverts various tool formats to functionDeclarations format.\n- **convertStopSequences**: Convert snake_case stop_sequences to camelCase stopSequences.\n- **applyClaudeTransforms**: Apply all Claude-specific transformations.\n\n\n\n\n## Dependencies\n- ./types\n- ../../constants\n\n## Exports\n- CLAUDE_THINKING_MAX_OUTPUT_TOKENS\n- CLAUDE_INTERLEAVED_THINKING_HINT\n- isClaudeModel\n- isClaudeThinkingModel\n- configureClaudeToolConfig\n- buildClaudeThinkingConfig\n- ensureClaudeMaxOutputTokens\n- appendClaudeThinkingHint\n- normalizeClaudeTools\n- convertStopSequences\n- ClaudeTransformOptions\n- ClaudeTransformResult\n- applyClaudeTransforms\n\n## Complexity Metrics\n- Lines of code: 367\n- Estimated complexity: 100/100\n\n## Notes\nNo specific notes found",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.079Z",
    "updated_at": "2026-01-30T05:26:52.079Z",
    "hash": "d7df5d56d581eda84dace02550c6449d995d4c0d1c7b3f81785d19ae0f784cec",
    "dependencies": [
      "./types",
      "../../constants"
    ],
    "symbols": [
      "CLAUDE_THINKING_MAX_OUTPUT_TOKENS",
      "CLAUDE_INTERLEAVED_THINKING_HINT",
      "isClaudeModel",
      "isClaudeThinkingModel",
      "lower",
      "configureClaudeToolConfig",
      "toolConfig",
      "buildClaudeThinkingConfig",
      "ensureClaudeMaxOutputTokens",
      "currentMax",
      "appendClaudeThinkingHint",
      "existing",
      "sys",
      "partsValue",
      "parts",
      "appended",
      "i",
      "part",
      "partRecord",
      "text",
      "normalizeClaudeTools",
      "toolDebugMissing",
      "toolDebugSummaries",
      "functionDeclarations",
      "passthroughTools",
      "normalizeSchema",
      "createPlaceholderSchema",
      "cleaned",
      "hasProperties",
      "t",
      "pushDeclaration",
      "schema",
      "name",
      "description",
      "finalTools",
      "convertStopSequences",
      "ClaudeTransformOptions",
      "ClaudeTransformResult",
      "applyClaudeTransforms",
      "isThinking",
      "thinkingBudget",
      "thinkingConfig",
      "generationConfig"
    ],
    "complexity_score": 100
  }
}