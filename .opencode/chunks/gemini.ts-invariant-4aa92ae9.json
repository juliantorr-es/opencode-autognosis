{
  "id": "gemini.ts-invariant-4aa92ae9",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/plugin/transform/gemini.ts",
  "chunk_type": "invariant",
  "content": "# Invariants: gemini.ts\n\n## Core Invariants\n\n\n## Constraints\n- **UNSUPPORTED_SCHEMA_FIELDS**: new Set([\n  \"additionalProperties\",\n  \"$schema\",\n  \"$id\", \n  \"$comment\",\n  \"$ref\",\n  \"$defs\",\n  \"definitions\",\n  \"const\",\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"if\",\n  \"then\",\n  \"else\",\n  \"not\",\n  \"patternProperties\",\n  \"unevaluatedProperties\",\n  \"unevaluatedItems\",\n  \"dependentRequired\",\n  \"dependentSchemas\",\n  \"propertyNames\",\n  \"minContains\",\n  \"maxContains\",\n])\n- **VALID_ASPECT_RATIOS**: [\"1:1\", \"2:3\", \"3:2\", \"3:4\", \"4:3\", \"4:5\", \"5:4\", \"9:16\", \"16:9\", \"21:9\"]\n\n## Assumptions\n\n\n## State Management\nNo explicit state management patterns detected\n\n## Error Handling\nNo explicit error handling patterns detected\n\n## Performance Considerations\nNo obvious performance optimization patterns detected\n\n## Security Considerations\nNo obvious security risks detected via static analysis",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.105Z",
    "updated_at": "2026-01-30T05:26:52.105Z",
    "hash": "04d8bcceb528432984a2ff4764f798eb924bdad2ed69b55762c8176c375ff8bb",
    "dependencies": [
      "./types"
    ],
    "symbols": [
      "UNSUPPORTED_SCHEMA_FIELDS",
      "toGeminiSchema",
      "inputSchema",
      "result",
      "propertyNames",
      "propName",
      "props",
      "validRequired",
      "isGeminiModel",
      "lower",
      "isGemini3Model",
      "isGemini25Model",
      "isImageGenerationModel",
      "lower",
      "buildGemini3ThinkingConfig",
      "buildGemini25ThinkingConfig",
      "ImageConfig",
      "VALID_ASPECT_RATIOS",
      "buildImageGenerationConfig",
      "aspectRatio",
      "normalizeGeminiTools",
      "toolDebugMissing",
      "toolDebugSummaries",
      "t",
      "newTool",
      "schemaCandidates",
      "placeholderSchema",
      "schema",
      "schemaObjectOk",
      "nameCandidate",
      "fn",
      "GeminiTransformOptions",
      "GeminiTransformResult",
      "applyGeminiTransforms",
      "thinkingConfig",
      "thinkingBudget",
      "generationConfig",
      "tools",
      "result",
      "wrapResult",
      "WrapToolsResult",
      "wrapToolsAsFunctionDeclarations",
      "functionDeclarations",
      "passthroughTools",
      "tool",
      "decl",
      "fn",
      "custom",
      "name",
      "description",
      "schema",
      "finalTools"
    ],
    "complexity_score": 100
  }
}