{
  "id": "storage.ts-api-c62d613a",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-antigravity-auth/src/plugin/recovery/storage.ts",
  "chunk_type": "api",
  "content": "# API Surface: storage.ts\n\n## Public Functions\n\n### generatePartId\n```typescript\nexport function generatePartId(): string\n```\nNo documentation found\n\n**Returns:** string\n\n\n### getMessageDir\n```typescript\nexport function getMessageDir(sessionID: string): string\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string\n\n\n### readMessages\n```typescript\nexport function readMessages(sessionID: string): StoredMessageMeta[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** StoredMessageMeta[]\n\n\n### readParts\n```typescript\nexport function readParts(messageID: string): StoredPart[]\n```\nNo documentation found\n\n**Parameters:**\n- `messageID`: string - \n\n**Returns:** StoredPart[]\n\n\n### hasContent\n```typescript\nexport function hasContent(part: StoredPart): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `part`: StoredPart - \n\n**Returns:** boolean\n\n\n### messageHasContent\n```typescript\nexport function messageHasContent(messageID: string): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `messageID`: string - \n\n**Returns:** boolean\n\n\n### injectTextPart\n```typescript\nexport function injectTextPart(sessionID: string, messageID: string, text: string): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n- `messageID`: string - \n- `text`: string - \n\n**Returns:** boolean\n\n\n### findMessagesWithThinkingBlocks\n```typescript\nexport function findMessagesWithThinkingBlocks(sessionID: string): string[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string[]\n\n\n### findMessagesWithThinkingOnly\n```typescript\nexport function findMessagesWithThinkingOnly(sessionID: string): string[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string[]\n\n\n### findMessagesWithOrphanThinking\n```typescript\nexport function findMessagesWithOrphanThinking(sessionID: string): string[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string[]\n\n\n### prependThinkingPart\n```typescript\nexport function prependThinkingPart(sessionID: string, messageID: string): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n- `messageID`: string - \n\n**Returns:** boolean\n\n\n### stripThinkingParts\n```typescript\nexport function stripThinkingParts(messageID: string): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `messageID`: string - \n\n**Returns:** boolean\n\n\n### findEmptyMessages\n```typescript\nexport function findEmptyMessages(sessionID: string): string[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string[]\n\n\n### findEmptyMessageByIndex\n```typescript\nexport function findEmptyMessageByIndex(sessionID: string, targetIndex: number): string | null\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n- `targetIndex`: number - \n\n**Returns:** string | null\n\n\n### findMessageByIndexNeedingThinking\n```typescript\nexport function findMessageByIndexNeedingThinking(sessionID: string, targetIndex: number): string | null\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n- `targetIndex`: number - \n\n**Returns:** string | null\n\n\n### replaceEmptyTextParts\n```typescript\nexport function replaceEmptyTextParts(messageID: string, replacementText: string): boolean\n```\nNo documentation found\n\n**Parameters:**\n- `messageID`: string - \n- `replacementText`: string - \n\n**Returns:** boolean\n\n\n### findMessagesWithEmptyTextParts\n```typescript\nexport function findMessagesWithEmptyTextParts(sessionID: string): string[]\n```\nNo documentation found\n\n**Parameters:**\n- `sessionID`: string - \n\n**Returns:** string[]\n\n\n## Classes\n\n\n## Interfaces\n\n\n## Types\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:51.971Z",
    "updated_at": "2026-01-30T05:26:51.971Z",
    "hash": "9554dbec3ea7ba8cb4f962ba515edeb5600c4b2884b3174b190e58ec9f3ed4bb",
    "dependencies": [
      "node:fs",
      "node:path",
      "./constants",
      "./types"
    ],
    "symbols": [
      "generatePartId",
      "timestamp",
      "random",
      "getMessageDir",
      "directPath",
      "dir",
      "sessionPath",
      "readMessages",
      "messageDir",
      "messages",
      "file",
      "content",
      "aTime",
      "bTime",
      "readParts",
      "partDir",
      "parts",
      "file",
      "content",
      "hasContent",
      "textPart",
      "messageHasContent",
      "parts",
      "injectTextPart",
      "partDir",
      "partId",
      "part",
      "findMessagesWithThinkingBlocks",
      "messages",
      "result",
      "msg",
      "parts",
      "hasThinking",
      "findMessagesWithThinkingOnly",
      "messages",
      "result",
      "msg",
      "parts",
      "hasThinking",
      "hasTextContent",
      "findMessagesWithOrphanThinking",
      "messages",
      "result",
      "i",
      "msg",
      "parts",
      "sortedParts",
      "firstPart",
      "firstIsThinking",
      "prependThinkingPart",
      "partDir",
      "partId",
      "part",
      "stripThinkingParts",
      "partDir",
      "anyRemoved",
      "file",
      "filePath",
      "content",
      "part",
      "findEmptyMessages",
      "messages",
      "emptyIds",
      "msg",
      "findEmptyMessageByIndex",
      "messages",
      "indicesToTry",
      "idx",
      "targetMsg",
      "findMessageByIndexNeedingThinking",
      "messages",
      "targetMsg",
      "parts",
      "sortedParts",
      "firstPart",
      "firstIsThinking",
      "replaceEmptyTextParts",
      "partDir",
      "anyReplaced",
      "file",
      "filePath",
      "content",
      "part",
      "textPart",
      "findMessagesWithEmptyTextParts",
      "messages",
      "result",
      "msg",
      "parts",
      "hasEmptyTextPart",
      "textPart"
    ],
    "complexity_score": 100
  }
}