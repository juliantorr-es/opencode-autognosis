{
  "id": "tool-cache.ts-api-db77e43e",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-dynamic-context-pruning/lib/state/tool-cache.ts",
  "chunk_type": "api",
  "content": "# API Surface: tool-cache.ts\n\n## Public Functions\n\n### syncToolCache\n```typescript\nexport async function syncToolCache(\n    state: SessionState,\n    config: PluginConfig,\n    logger: Logger,\n    messages: WithParts[],\n): Promise<void>\n```\nSync tool parameters from OpenCode's session.messages() API.\n\n**Parameters:**\n- `state`: SessionState - \n- `config`: PluginConfig - \n- `logger`: Logger - \n- `messages`: WithParts[] - \n\n**Returns:** Promise<void>\n\n\n### trimToolParametersCache\n```typescript\nexport function trimToolParametersCache(state: SessionState): void\n```\nTrim the tool parameters cache to prevent unbounded memory growth.\nUses FIFO eviction - removes oldest entries first.\n\n**Parameters:**\n- `state`: SessionState - \n\n**Returns:** void\n\n\n## Classes\n\n\n## Interfaces\n\n\n## Types\n",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.173Z",
    "updated_at": "2026-01-30T05:26:52.173Z",
    "hash": "0d432ee552838085d7a66fb5ad122e572046de21e0f9a8958c49812391c2ffe4",
    "dependencies": [
      "./index",
      "../logger",
      "../config",
      "../shared-utils"
    ],
    "symbols": [
      "MAX_TOOL_CACHE_SIZE",
      "syncToolCache",
      "turnCounter",
      "msg",
      "parts",
      "part",
      "turnProtectionEnabled",
      "turnProtectionTurns",
      "isProtectedByTurn",
      "allProtectedTools",
      "error",
      "trimToolParametersCache",
      "keysToRemove",
      "key"
    ],
    "complexity_score": 100
  }
}