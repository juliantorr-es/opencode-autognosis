{
  "id": "request-helpers.ts-invariant-4b15dc9b",
  "file_path": "/Users/user/opencode-autognosis/reference repos/opencode-google-antigravity-auth/src/plugin/request-helpers.ts",
  "chunk_type": "invariant",
  "content": "# Invariants: request-helpers.ts\n\n## Core Invariants\n\n\n## Constraints\n- **SESSION_ID**: `-${Math.floor(Math.random() * 9_000_000_000_000_000)}`\n- **ANTIGRAVITY_BASE_SYSTEM_INSTRUCTION**: \"You are Antigravity, a powerful agentic AI coding assistant designed by the Google Deepmind team working on Advanced Agentic Coding.You are pair programming with a USER to solve their coding task. The task may require creating a new codebase, modifying or debugging an existing codebase, or simply answering a question.**Absolute paths only****Proactiveness**\"\n- **GEMINI_PREVIEW_LINK**: \"https://goo.gle/enable-preview-features\"\n\n## Assumptions\n\n\n## State Management\nNo explicit state management patterns detected\n\n## Error Handling\nError handling metrics: 8 try-catch blocks, 0 throw statements\n\n## Performance Considerations\nNo obvious performance optimization patterns detected\n\n## Security Considerations\nNo obvious security risks detected via static analysis",
  "metadata": {
    "created_at": "2026-01-30T05:26:52.225Z",
    "updated_at": "2026-01-30T05:26:52.225Z",
    "hash": "49f38108bdd5d6629c7a109a9f4e6c00f554a676624c8a87200c7ac35d83e71a",
    "dependencies": [
      "node:crypto",
      "./tool-schema-cache"
    ],
    "symbols": [
      "SESSION_ID",
      "getSessionId",
      "generateRequestId",
      "ANTIGRAVITY_BASE_SYSTEM_INSTRUCTION",
      "applyAntigravitySystemInstruction",
      "normalizedModel",
      "needsInjection",
      "existing",
      "existingParts",
      "existingRecord",
      "parts",
      "nextParts",
      "GEMINI_PREVIEW_LINK",
      "GeminiApiError",
      "GeminiApiBody",
      "GeminiUsageMetadata",
      "ThinkingConfig",
      "normalizeThinkingConfig",
      "record",
      "budgetRaw",
      "levelRaw",
      "includeRaw",
      "thinkingBudget",
      "thinkingLevel",
      "includeThoughts",
      "normalized",
      "parseGeminiApiBody",
      "parsed",
      "firstObject",
      "extractUsageMetadata",
      "usage",
      "asRecord",
      "toNumber",
      "extractUsageFromSsePayload",
      "lines",
      "line",
      "jsonText",
      "parsed",
      "usage",
      "rewriteGeminiPreviewAccessError",
      "error",
      "trimmedMessage",
      "messagePrefix",
      "enhancedMessage",
      "needsPreviewAccessOverride",
      "errorMessage",
      "ErrorDetail",
      "rewriteGeminiRateLimitError",
      "error",
      "isRateLimit",
      "message",
      "isGeminiThreeModel",
      "toUrlString",
      "candidate",
      "safeJsonParse",
      "recursivelyParseJsonStrings",
      "record",
      "stripped",
      "hasControlCharEscapes",
      "hasIntentionalEscapes",
      "unescaped",
      "isWellFormed",
      "parsed",
      "lastBracket",
      "cleaned",
      "parsed",
      "lastBrace",
      "cleaned",
      "parsed",
      "processEscapeSequencesOnly",
      "hasControlCharEscapes",
      "hasIntentionalEscapes",
      "unescaped",
      "normalizeToolCallArgs",
      "record",
      "result",
      "expectedType",
      "parsed"
    ],
    "complexity_score": 100
  }
}